# Define the parameters that can be passed to the orb
parameters:
  executor:
    default: default
    type: executor
  filter:
    description: Filters static files
    when:
      type: object
      properties:
        changeset:
          type: changeset
          includes:
            type: array
            items:
              type: string
          excludes:
            type: array
            items:
              type: string
      filter-branch:
        type: object
        properties:
          only:
            type: array
            items:
              type: string
            default:
              - all

    steps:
      - filters:
          branches:
            only: << parameters.filter.filter-branch.only >>
            condition:
              and:
                includes: << parameters.filter.when.changeset.includes || defaults.changeset_includes >>
                excludes: << parameters.filter.when.changeset.excludes || defaults.changeset_excludes >>


executor: << parameters.executor >>

steps:
  - attach-workspace
  - when:
      filters:
        branches:
          only: << parameters.filter.filter-branch.only || defaults.branches >>
          condition:
            and:
              includes: << parameters.when.changeset.includes || defaults.changeset_includes >>
              excludes: << parameters.when.changeset.excludes || defaults.changeset_excludes >>

