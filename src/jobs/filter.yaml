# Define the parameters that can be passed to the orb
parameters:
  executor:
    default: default
    type: executor
  includes:
    type: array
    items:
      type: string
  excludes:
    type: array
    items:
      type: string
  filter-branch:
    type: object
    branches:
      type: array
      items:
        type: string
      default:
        - all

  steps:
    - filters:
        branches:
          only: << parameters.filter-branch.branches >>
        condition:
          and:
            includes: << parameters.includes || defaults.includes >>
            excludes: << parameters.excludes || defaults.excludes >>

executor: << parameters.executor >>

steps:
  - attach-workspace
  - when:
    filter:
      branches:
        only: << parameters.filter-branch.branches || defaults.branches >>
      condition:
        and:
          includes: << parameters.includes || defaults.includes >>
          excludes: << parameters.excludes || defaults.excludes >>
