parameters:
  executor:
    default: default
    type: executor
  filter:
      description: Filters static files
      parameters:
        when:
          type: object
          properties:
            changeset:
              type: changeset
              includes:
                type: array
                items:
                  type: string
              excludes:
                type: array
                items:
                  type: string
        filter-branch:
          type: string
          filter-branch:
            type: string
            only:
              type: array
              items:
                type: string
      steps:
        - filters:
            <<: *filter-branch
executor: << parameters.executor >>
# based on CircleCI parameters
when: &when
  when_changeset:
    includes: << parameters.when.when_changeset.includes || defaults.changeset_includes >>
    excludes: << parameters.when.when_changeset.excludes || defaults.changeset_excludes >>

filter-branch: &filter-branch
  branches:
    only: << parameters.filter.branches.only || defaults.branches >>
    when:
      changeset:
        includes: << parameters.filter.when.changeset.includes || defaults.changeset_includes >>
        excludes: << parameters.filter.when.changeset.excludes || defaults.changeset_excludes >>
steps:
  - attach-workspace
  - when:
      <<: *when